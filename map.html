<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Map</title>
  <link rel="icon" type="image/png" href="origami.png">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    html, body { 
      height: 100%; 
      margin: 0; 
      font-family: 'Inter', sans-serif; 
      overflow: hidden;
    }
    
    h1, h2, .font-serif { 
      font-family: 'Playfair Display', serif; 
    }

    main { 
      display: flex; 
      height: calc(100vh - 4rem); 
      overflow: hidden; 
      position: relative;
    }

    /* Animazioni */
    @keyframes slideIn {
      from { transform: translateX(-100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    @keyframes glow {
      0%, 100% { box-shadow: 0 0 0 0 rgba(1,4,53,0.3); }
      50% { box-shadow: 0 0 20px 5px rgba(1,4,53,0.2); }
    }

    /* Sidebar desktop */
    aside {
      width: 25%;
      min-width: 300px;
      background: white;
      display: flex;
      flex-direction: column;
      border-right: 1px solid #ccc;
      z-index: 20;
      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative;
      overflow: hidden;
    }

    aside::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 1px;
      height: 100%;
      background: linear-gradient(180deg, transparent, #010435, transparent);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    aside:hover::after {
      opacity: 0.5;
    }

    #sidebar-list { 
      flex: 1; 
      overflow-y: auto; 
      padding: 0.5rem;
    }

    #map { 
      flex: 1; 
      height: 100%; 
      z-index: 0; 
      transition: all 0.3s ease;
    }

    .edition-card {
      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      border-left: 4px solid transparent;
      margin-bottom: 0.5rem;
      border-radius: 8px;
      background: white;
      animation: fadeIn 0.5s ease;
      position: relative;
      overflow: hidden;
    }

    .edition-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, #010435, #5A7796);
      transition: left 0.3s ease;
    }

    .edition-card:hover::before {
      left: 0;
    }

    .edition-card:hover { 
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 10px 20px -5px rgba(1,4,53,0.2);
      border-left: 4px solid #010435; 
    }

    .edition-card.active { 
      background: linear-gradient(135deg, #e5edff, #ffffff);
      border-left: 4px solid #1e40af;
      box-shadow: 0 5px 15px rgba(30,64,175,0.2);
    }

    .edition-card.active::after {
      content: 'üìç';
      position: absolute;
      right: 10px;
      top: 10px;
      font-size: 1.2rem;
      animation: bounce 1s ease infinite;
    }

    nav { 
      z-index: 5000 !important; 
      transition: all 0.3s ease;
    }

    .leaflet-container { 
      z-index: 0 !important; 
    }

    /* Search section */
    .search-section {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .search-section::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, #010435, #5A7796, #010435);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    .search-section:hover::after {
      transform: scaleX(1);
    }

    #searchInput {
      transition: all 0.3s ease;
      border: 2px solid transparent;
      background: rgba(255,255,255,0.1);
    }

    #searchInput:focus {
      border-color: white;
      background: rgba(255,255,255,0.15);
      box-shadow: 0 0 20px rgba(255,255,255,0.2);
      transform: scale(1.02);
    }

    /* Stats badges */
    .stat-badge {
      transition: all 0.3s ease;
      animation: fadeIn 0.5s ease;
    }

    .stat-badge:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(1,4,53,0.2);
    }

    /* Reset button */
    #viewAll {
      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      animation: glow 2s infinite;
    }

    #viewAll:hover {
      transform: scale(1.1);
      background: #010435 !important;
      color: white !important;
      box-shadow: 0 10px 25px -5px rgba(1,4,53,0.4);
    }

    /* Mobile drawer */
    @media (max-width: 768px) {
      aside {
        width: 80%;
        max-width: 300px;
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        background: white;
        z-index: 50;
        transform: translateX(-100%);
        box-shadow: 2px 0 10px rgba(0,0,0,0.2);
      }
      
      aside.open { 
        transform: translateX(0); 
        animation: slideIn 0.3s ease;
      }

      #overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.3);
        z-index: 40;
        backdrop-filter: blur(3px);
        transition: all 0.3s ease;
      }
      
      #overlay.active { 
        display: block; 
        animation: fadeIn 0.3s ease;
      }

      #map { 
        flex: 1; 
        height: 100%; 
      }

      #sidebarToggle {
        transition: all 0.3s ease;
        animation: pulse 2s infinite;
      }

      #sidebarToggle:hover {
        transform: scale(1.1);
        background: #2A3F5E !important;
      }
    }

    /* Scrollbar sidebar */
    #sidebar-list::-webkit-scrollbar { 
      width: 6px; 
    }
    
    #sidebar-list::-webkit-scrollbar-track { 
      background: #f1f1f1; 
      border-radius: 10px;
    }
    
    #sidebar-list::-webkit-scrollbar-thumb { 
      background: #010435; 
      border-radius: 10px;
      transition: all 0.3s ease;
    }
    
    #sidebar-list::-webkit-scrollbar-thumb:hover { 
      background: #2A3F5E; 
    }

    /* Popup personalizzato */
    .custom-popup .leaflet-popup-content-wrapper {
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(1,4,53,0.2);
      animation: fadeIn 0.3s ease;
    }

    .custom-popup .leaflet-popup-tip {
      box-shadow: 0 10px 30px rgba(1,4,53,0.2);
    }

    /* Loading state */
    .loading-skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
      border-radius: 8px;
      height: 80px;
      margin-bottom: 0.5rem;
    }

    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* Counter animation */
    @keyframes countUp {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .count-up {
      animation: countUp 0.5s ease;
    }
  </style>
</head>

<body class="bg-[#EFF4FA] text-[#010435]">

<!-- NAVBAR -->
<div id="navbar-root"></div>

<!-- Bottone sidebar mobile -->
<button id="sidebarToggle" class="md:hidden fixed top-4 left-4 z-[5001] px-4 py-2 bg-[#010435] text-white rounded-full shadow-lg flex items-center gap-2">
  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
  </svg>
  SEARCH
</button>
<div id="overlay"></div>

<div class="h-16"></div>

<main>
  <!-- SIDEBAR -->
  <aside>
    <div class="search-section p-5 bg-gradient-to-br from-[#010435] to-[#1e3a8a] text-white">
      <div class="flex items-center gap-2 mb-3">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="animate-pulse">
          <circle cx="11" cy="11" r="8"/>
          <path d="M21 21l-4.35-4.35"/>
        </svg>
        <label for="searchInput" class="text-xs uppercase tracking-widest font-semibold opacity-80">
          Search Edition
        </label>
      </div>

      <div class="relative">
        <input 
          id="searchInput"
          placeholder="Search by Title, Author, Curator..."
          class="w-full p-3 pl-10 rounded-xl text-sm bg-white/10 border border-white/20 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all"
        />
        <svg class="absolute left-3 top-3 w-4 h-4 text-white/50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
      </div>

      <!-- Stats -->
      <div class="flex justify-between mt-4 text-xs">
        <div class="stat-badge bg-white/20 px-3 py-1 rounded-full">
          <span id="results-count" class="font-bold">0</span> editions
        </div>
      </div>
    </div>

    <div id="sidebar-list" class="p-2"></div>
  </aside>

  <!-- MAP -->
  <div class="relative flex-1">
    <div id="map"></div>
    
    <!-- Controlli mappa -->
    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 z-[1000] flex gap-3">
      <button id="viewAll" class="bg-white px-6 py-3 rounded-full shadow-lg font-semibold text-sm border flex items-center gap-2">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33-1.82 8 8 0 0 0-14.46 0A1.65 1.65 0 0 0 4.6 15"/>
        </svg>
        Reset View
      </button>
      
      <button id="toggleMarkers" class="bg-white px-4 py-3 rounded-full shadow-lg font-semibold text-sm border flex items-center gap-2 hover:bg-gray-100 transition-all">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M12 2a8 8 0 0 0-8 8c0 4.42 8 12 8 12s8-7.58 8-12a8 8 0 0 0-8-8z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
        <span class="marker-toggle-text">Hide</span> Markers
      </button>
    </div>

    <!-- Mini mappa in basso a destra -->
    <div class="absolute bottom-6 right-6 z-[1000] bg-white rounded-lg shadow-lg p-2 hidden md:block">
      <div id="miniMap" style="width: 150px; height: 100px; border-radius: 8px;"></div>
    </div>
  </div>
</main>

<!-- LIBRARIES -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- MAP SCRIPT -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const sidebarList = document.getElementById("sidebar-list");
  const searchInput = document.getElementById("searchInput");
  const resultsCount = document.getElementById("results-count");
  const locationsCount = document.getElementById("locations-count");

  const initialView = [41.8902, 12.4922];
  const initialZoom = 4;
  
  // Mappa principale
  const map = L.map("map").setView(initialView, initialZoom);
  L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png", {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
  }).addTo(map);

  // Mini mappa
  const miniMap = L.map("miniMap", {
    attributionControl: false,
    zoomControl: false,
    dragging: false,
    scrollWheelZoom: false
  }).setView(initialView, 2);
  
  L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png").addTo(miniMap);

  let allData = [];
  let markers = [];
  let markersVisible = true;
  let currentHighlight = null;

  const params = new URLSearchParams(window.location.search);
  const highlightID = params.get("id");
  const urlLat = params.get("lat");
  const urlLng = params.get("lng");
  const urlTitle = params.get("title");

  // Load JSON
  fetch("./data/list_json.json")
    .then(r => r.json())
    .then(data => {
      allData = data;
      renderUI(allData);
      handleURLFocus();
      
      // Aggiorna contatori
      const uniqueLocations = new Set(data.filter(item => 
        item.institution_lat && item.institution_lng
      ).map(item => `${item.institution_lat},${item.institution_lng}`)).size;
      
      locationsCount.textContent = uniqueLocations;
    })
    .catch(err => {
      console.error(err);
      sidebarList.innerHTML = '<div class="p-4 text-center text-red-500"></div>';
    });

  function cleanText(str) {
    return (str||"").replace(/,+/g,",").replace(/\s+/g," ").replace(/,\s*$/,"").trim();
  }
  
  function formatName(surname,name){
    surname=cleanText(surname); name=cleanText(name);
    if(!surname&&!name)return""; if(!surname)return name; if(!name)return surname;
    return `${surname}, ${name}`;
  }

  function renderUI(data){
    // Rimuovi markers esistenti
    markers.forEach(m=>map.removeLayer(m));
    markers=[];
    
    // Mostra loading
    sidebarList.innerHTML = '<div class="loading-skeleton"></div>'.repeat(5);
    
    setTimeout(() => {
      sidebarList.innerHTML = "";
      const editions=new Map();
      
      data.forEach(item=>{
        const curator=formatName(item.curator_surname,item.curator_name);
        if(!editions.has(item.ID)) editions.set(item.ID,{...item,curators:[]});
        if(curator&&!editions.get(item.ID).curators.includes(curator))
          editions.get(item.ID).curators.push(curator);
      });
      
      const deduped=[...editions.values()];
      resultsCount.innerText=deduped.length;

      deduped.forEach((item, index)=>{
        const lat=parseFloat(item.institution_lat||item.location_lat);
        const lng=parseFloat(item.institution_lng||item.location_lng);
        if(isNaN(lat)||isNaN(lng))return;
        
        const author=formatName(item.author_surname,item.author_name);
        const curatorsText=item.curators.length?item.curators.join(";"):"";

        // Marker personalizzato
        const customIcon = L.divIcon({
          className: 'custom-marker',
          html: `<div style="background: #010435; width: 30px; height: 30px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: bold; transform: scale(1); transition: all 0.3s ease;">${index+1}</div>`,
          iconSize: [30, 30],
          iconAnchor: [15, 15],
          popupAnchor: [0, -15]
        });

        const marker = L.marker([lat,lng], { icon: customIcon }).addTo(map);
        
        marker.bindPopup(`
          <div class="p-3 max-w-xs">
            <div class="font-bold text-lg mb-1" style="font-family: 'Playfair Display'">${item.title}</div>
            <div class="text-sm text-gray-600 mb-2">
              ${author ? `<div><strong>Author:</strong> ${author}</div>` : ''}
              ${curatorsText ? `<div><strong>Curators:</strong> ${curatorsText}</div>` : ''}
            </div>
            <div class="flex gap-2 mt-2">
              <a href="${item.URL}" target="_blank" class="flex-1 px-3 py-1 bg-[#010435] text-white text-center rounded-full text-sm hover:bg-[#2A3F5E] transition-all">
                Open project ‚Üí
              </a>
              <button onclick="flyToLocation(${lat}, ${lng})" class="px-3 py-1 border border-gray-300 rounded-full text-sm hover:bg-gray-100 transition-all">
                üìç
              </button>
            </div>
          </div>
        `, { className: 'custom-popup' });

        markers.push(marker);

        const card=document.createElement("div");
        card.className="edition-card p-4 border cursor-pointer";
        card.dataset.id=item.ID;
        card.dataset.lat=lat;
        card.dataset.lng=lng;
        card.style.animationDelay = `${index * 0.05}s`;
        
        card.innerHTML=`
          <div class="flex justify-between items-center mb-2">
            <span class="text-xs font-bold bg-gray-100 px-2 py-1 rounded-full">#${item.ID}</span>
            <span class="text-xs text-blue-600 font-semibold px-2 py-1 bg-blue-50 rounded-full">${item.epoch||"N/A"}</span>
          </div>
          <div class="text-base font-bold mb-1 line-clamp-2">${item.title}</div>
          <div class="text-sm text-gray-600 mb-2">${author}</div>
          <div class="text-xs text-gray-400 flex items-center gap-1">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 2a8 8 0 0 0-8 8c0 4.42 8 12 8 12s8-7.58 8-12a8 8 0 0 0-8-8z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            ${curatorsText ? curatorsText.split(';')[0] + '...' : 'No curator'}
          </div>
        `;
        
        card.onclick=()=>{
          // Rimuovi highlight precedente
          if(currentHighlight) {
            currentHighlight.classList.remove("active");
          }
          
          map.setView([lat,lng], 13, { animate: true, duration: 1 });
          marker.openPopup();
          card.classList.add("active");
          currentHighlight = card;
          
          // Aggiungi effetto pulse al marker
          marker.setIcon(L.divIcon({
            className: 'custom-marker pulse',
            html: `<div style="background: #1e40af; width: 40px; height: 40px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 20px #1e40af; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; font-weight: bold;">${index+1}</div>`,
            iconSize: [40, 40],
            iconAnchor: [20, 20],
            popupAnchor: [0, -20]
          }));
          
          // Rimetti icona normale dopo 2 secondi
          setTimeout(() => {
            marker.setIcon(customIcon);
          }, 2000);
        };
        
        sidebarList.appendChild(card);
      });
      
      // Se non ci sono risultati
      if(deduped.length === 0) {
        sidebarList.innerHTML = '<div class="p-8 text-center text-gray-500">No editions found</div>';
      }
    }, 500);
  }

  // Funzione globale per volare su location
  window.flyToLocation = (lat, lng) => {
    map.flyTo([lat, lng], 13, { duration: 1.5 });
  };

  // Search con debounce
  let searchTimeout;
  searchInput.addEventListener("input", e => {
    clearTimeout(searchTimeout);
    const q = e.target.value.toLowerCase();
    
    searchTimeout = setTimeout(() => {
      const filtered = allData.filter(item => {
        const title = (item.title||"").toLowerCase();
        const author = `${item.author_surname||""} ${item.author_name||""}`.toLowerCase();
        const curator = `${item.curator_surname||""} ${item.curator_name||""}`.toLowerCase();
        const place = (item.located_at||"").toLowerCase();
        const epoch = (item.epoch||"").toLowerCase();
        
        return title.includes(q) || author.includes(q) || curator.includes(q) || place.includes(q) || epoch.includes(q);
      });
      
      renderUI(filtered);
      
      // Aggiorna contatori
      const uniqueLocations = new Set(filtered.filter(item => 
        item.institution_lat && item.institution_lng
      ).map(item => `${item.institution_lat},${item.institution_lng}`)).size;
      
      locationsCount.textContent = uniqueLocations;
    }, 300);
  });

  // Reset view con animazione
  document.getElementById("viewAll").onclick = () => { 
    map.flyTo(initialView, initialZoom, { duration: 1.5 });
    map.closePopup();
    
    if(currentHighlight) {
      currentHighlight.classList.remove("active");
      currentHighlight = null;
    }
  };

  // Toggle markers
  document.getElementById("toggleMarkers").onclick = () => {
    markersVisible = !markersVisible;
    const btn = document.getElementById("toggleMarkers");
    const span = btn.querySelector(".marker-toggle-text");
    
    if(markersVisible) {
      markers.forEach(m => map.addLayer(m));
      span.textContent = "Hide";
      btn.classList.remove("bg-gray-200");
    } else {
      markers.forEach(m => map.removeLayer(m));
      span.textContent = "Show";
      btn.classList.add("bg-gray-200");
    }
  };

  function handleURLFocus(){
    if(urlLat&&urlLng){
      const lat=parseFloat(urlLat),lng=parseFloat(urlLng);
      map.flyTo([lat,lng],12, { duration: 1.5 });
      
      const marker = L.marker([lat,lng]).addTo(map);
      marker.bindPopup(urlTitle||"").openPopup();
      
      // Rimuovi marker dopo 5 secondi
      setTimeout(() => map.removeLayer(marker), 5000);
      return;
    }
    
    if(!highlightID)return;
    
    setTimeout(() => {
      const item=allData.find(b=>String(b.ID)===highlightID);
      if(!item)return;
      
      const lat=parseFloat(item.institution_lat),lng=parseFloat(item.institution_lng);
      if(!lat||!lng)return;
      
      map.flyTo([lat,lng],12, { duration: 1.5 });
      
      markers.forEach(m=>{ 
        if(m.getLatLng().lat===lat && m.getLatLng().lng===lng) {
          setTimeout(() => m.openPopup(), 1500);
        }
      });
      
      const card=document.querySelector(`[data-id="${highlightID}"]`);
      if(card){ 
        card.classList.add("active"); 
        card.scrollIntoView({behavior:"smooth",block:"center"}); 
        currentHighlight = card;
      }
    }, 1000);
  }

  // Mobile sidebar toggle
  const sidebar=document.querySelector("aside");
  const toggleBtn=document.getElementById("sidebarToggle");
  const overlay=document.getElementById("overlay");

  toggleBtn.addEventListener("click",()=>{
    sidebar.classList.toggle("open");
    overlay.classList.toggle("active");
    toggleBtn.classList.toggle("bg-[#2A3F5E]");
  });

  overlay.addEventListener("click",()=>{
    sidebar.classList.remove("open");
    overlay.classList.remove("active");
    toggleBtn.classList.remove("bg-[#2A3F5E]");
  });

  // Resize map on window change
  window.addEventListener("resize",()=>{ 
    map.invalidateSize(); 
    miniMap.invalidateSize();
  });

  // Aggiungi marker cluster opzionale (per molte location)
  if(markers.length > 50) {
    // Qui potresti aggiungere marker cluster
  }

  // Effetto parallax sulla mappa
  let lastScrollY = 0;
  window.addEventListener('scroll', () => {
    const scrolled = window.scrollY;
    const rate = scrolled * 0.5;
    map.panBy([0, rate - lastScrollY], { animate: false });
    lastScrollY = rate;
  });
});
</script>

<!-- NAVBAR -->
<script type="text/babel">
function Navbar() {
  const [mobileOpen, setMobileOpen] = React.useState(false);
  const [dropdownOpen, setDropdownOpen] = React.useState(false);
  const [scrolled, setScrolled] = React.useState(false);

  React.useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  return (
    <nav className={`w-full fixed top-0 left-0 z-[5000] transition-all duration-500 ${
      scrolled ? 'bg-[#EFF4FA] shadow-lg backdrop-blur-sm bg-opacity-90' : 'bg-[#EFF4FA]'
    }`} style={{ fontFamily: 'Playfair Display, serif' }}>
      <div className="max-w-7xl mx-auto px-4">
        <div className="flex justify-between h-16 items-center">
          <a href="index.html" className="text-xl font-semibold text-[#010435] relative group">
            PHIDE
            <span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-[#010435] to-[#5A7796] transition-all duration-300 group-hover:w-full"></span>
          </a>

          <div className="hidden md:flex space-x-6 items-center">
            <div className="relative">
              <button onClick={() => setDropdownOpen(!dropdownOpen)} className="flex items-center gap-1 font-medium hover:text-[#5A7796] transition-all group">
                Browse
                <svg className={`w-4 h-4 transition-transform duration-300 ${dropdownOpen ? 'rotate-180' : 'group-hover:translate-y-0.5'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7"/>
                </svg>
              </button>
              {dropdownOpen && (
                <div className="absolute mt-2 w-48 bg-white border rounded shadow-xl flex flex-col animate-fadeIn">
                  <a href="catalogue-period.html" className="px-4 py-2 hover:bg-gray-100 transition-all hover:pl-6">Catalogue</a>
                  <a href="scheda.html" className="px-4 py-2 hover:bg-gray-100 transition-all hover:pl-6">Table of Contents</a>
                </div>
              )}
            </div>
            <a href="map.html" className="font-medium hover:text-[#5A7796] transition-colors relative group">
              Map
              <span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-[#5A7796] transition-all duration-300 group-hover:w-full"></span>
            </a>
            <a href="documentation.html" className="font-medium hover:text-[#5A7796] transition-colors relative group">
              Documentation
              <span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-[#5A7796] transition-all duration-300 group-hover:w-full"></span>
            </a>
          </div>

          <button onClick={() => setMobileOpen(!mobileOpen)} className="md:hidden p-2 hover:bg-gray-200 rounded-lg transition-all hover:scale-110">
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              {mobileOpen ? <path d="M6 18L18 6M6 6l12 12"/> : <path d="M4 6h16M4 12h16M4 18h16"/>}
            </svg>
          </button>
        </div>
      </div>

      {mobileOpen && (
        <div className="md:hidden bg-white border-t shadow-lg animate-slideDown">
          <div className="px-4 py-3 space-y-2">
            <a href="catalogue-period.html" className="block px-3 py-2 hover:bg-gray-100 transition-all hover:pl-5">Catalogue</a>
            <a href="map.html" className="block px-3 py-2 hover:bg-gray-100 transition-all hover:pl-5">Map</a>
            <a href="documentation.html" className="block px-3 py-2 hover:bg-gray-100 transition-all hover:pl-5">Documentation</a>
          </div>
        </div>
      )}
    </nav>
  );
}

// Aggiungi stili animazioni
const style = document.createElement('style');
style.textContent = `
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn {
    animation: fadeIn 0.3s ease forwards;
  }
  .animate-slideDown {
    animation: slideDown 0.3s ease forwards;
  }
`;
document.head.appendChild(style);

ReactDOM.createRoot(document.getElementById("navbar-root")).render(<Navbar />);
</script>

</body>
</html>